package com.whj.k12docpreview;import androidx.annotation.RequiresApi;import androidx.appcompat.app.AppCompatActivity;import android.Manifest;import android.annotation.SuppressLint;import android.app.Activity;import android.content.ContentUris;import android.content.Context;import android.content.Intent;import android.database.Cursor;import android.net.Uri;import android.os.Build;import android.os.Bundle;import android.provider.DocumentsContract;import android.provider.MediaStore;import android.view.View;import android.widget.Button;import com.tbruyelle.rxpermissions2.RxPermissions;import com.whj.tbspreview.DocPreviewActivity;import com.whj.tbspreview.K12DocPreview;public class MainActivity extends AppCompatActivity implements View.OnClickListener {    Button btn_file;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        afterView();        initView();    }    /**     * 初始化视图     */    private void initView() {        btn_file = findViewById(R.id.btn_file);        btn_file.setOnClickListener(this);    }    public void afterView() {        RxPermissions permissions = new RxPermissions(this);        permissions.request(Manifest.permission.CAMERA                , Manifest.permission.WRITE_EXTERNAL_STORAGE                , Manifest.permission.RECORD_AUDIO                , Manifest.permission.ACCESS_WIFI_STATE                , Manifest.permission.CHANGE_WIFI_STATE                , Manifest.permission.CHANGE_NETWORK_STATE                , Manifest.permission.ACCESS_NETWORK_STATE                , Manifest.permission.READ_EXTERNAL_STORAGE                , Manifest.permission.VIBRATE                , Manifest.permission.ACCESS_FINE_LOCATION                , Manifest.permission.ACCESS_COARSE_LOCATION        )                .subscribe(aBoolean -> {                    if (aBoolean) {                    } else {                    }                });    }    private void openLocalFile(){        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);        intent.setType("*/*");//设置类型，我这里是任意类型，任意后缀的可以这样写。        intent.addCategory(Intent.CATEGORY_OPENABLE);        startActivityForResult(intent,1);    }    @RequiresApi(api = Build.VERSION_CODES.KITKAT)    @Override    protected void onActivityResult(int requestCode, int resultCode, Intent data) {        if (resultCode == Activity.RESULT_OK) {//是否选择，没选择就不会继续            Uri uri = data.getData();//得到uri，后面就是将uri转化成file的过程。            String img_path = FileUtils.getPath(MainActivity.this,uri);            K12DocPreview.builder(this)                    .setPath(img_path)                    .setTitle(img_path)                    .previewForLandscape();        }        super.onActivityResult(requestCode, resultCode, data);    }    @Override    public void onClick(View v) {        switch (v.getId()) {            case R.id.btn_file:                openLocalFile();                break;        }    }}